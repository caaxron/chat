(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1153:function(e,t,a){Promise.resolve().then(a.bind(a,2909))},2909:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(7437),r=a(8121);let n=(0,a(6142).ZF)({apiKey:"AIzaSyB5stfrfaLePm38CqARYOrwIDgc5mpevko",authDomain:"chat-f53b2.firebaseapp.com",projectId:"chat-f53b2",storageBucket:"chat-f53b2.appspot.com",messagingSenderId:"995126412197",appId:"1:995126412197:web:a10f60197faf080a885e4c"}),l=(0,r.ad)(n);var o=a(2265);let c=e=>{let{getRootProps:t,getInputProps:a,isFocused:r,isHovered:n,setIsHovered:l,fileName:c}=e,i=(0,o.useMemo)(()=>({flex:1,display:"flex",width:"100%",height:"50%",justifyContent:"center",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:16,borderColor:r?"#1e40af":"#94a3b8",borderStyle:"dashed",backgroundColor:n?"#f0f0f0":"#ffffff",color:"#94a3b8",outline:"none",transition:"border .24s ease-in-out, background-color .24s ease-in-out"}),[r,n]);return(0,s.jsxs)("div",{...t({style:i}),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,s.jsx)("input",{className:"w-full ",...a()}),(0,s.jsx)("div",{children:c||(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)("svg",{"aria-hidden":"true",className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,s.jsxs)("h1",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,s.jsx)("span",{className:"text-xs",children:"only for txt file"})]})})]})};async function i(e,t){try{await (0,r.ET)((0,r.hJ)(l,"chat"),{fileName:e,wordCount:t})}catch(e){console.log(e,"Fail to upload")}}let d=(0,a(2020).Ue)(e=>({wordCounts:[],calculateWord:(t,a)=>{let s=t.split("\n"),r={},n="";s.forEach(e=>{let t=e.trim().split(/\s+/);t.length>0&&(t[0].startsWith("<")&&t[0].endsWith(">")?r[n=t[0].slice(1,-1)]=(r[n]||0)+t.length-1:r[n]=(r[n]||0)+t.length)});let l=Object.entries(r).sort((e,t)=>t[1]-e[1]).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a+" words")});i(a,l),e({wordCounts:l})}}));var u=a(7453);let h=e=>(0,s.jsx)("div",{className:"flex flex-col justify-center items-center pt-10",children:Object.entries(e).map(e=>{let[t,a]=e;return(0,s.jsx)("ul",{children:a.map((e,t)=>{let[a,r]=e.split(": ");return(0,s.jsx)("li",{children:"".concat(a,": ").concat(r)},t)})})})}),f=e=>{let{isLoading:t,data:a,selectedButton:r,buttonHandler:n}=e;return t?(0,s.jsx)("h1",{children:"Loading....."}):a&&a.map((e,t)=>(0,s.jsx)("button",{onClick:()=>n(e.id),className:"h-8 bg-cyan-100 rounded-xl border-2 ".concat(e.id===r?"border-cyan-500":""),children:e.fileName},t))},x=e=>{let{data:t,selectedButton:a}=e;return t&&t.map((e,t)=>(0,s.jsx)("div",{className:"flex flex-col",children:e.id===a&&(0,s.jsx)("ul",{children:e.wordCount.map((e,t)=>{let[a,r]=e.split(": ");return(0,s.jsx)("li",{children:"".concat(a,": ").concat(r)},t)})})},t))};function p(){let{wordCounts:e,calculateWord:t}=d(),[a,n]=(0,o.useState)(!1),[i,p]=(0,o.useState)(""),[m,g]=(0,o.useState)(),[j,b]=(0,o.useState)(),[w,v]=(0,o.useState)(),y=async()=>{try{b(!0);let e=await (0,r.PL)((0,r.hJ)(l,"chat")),t=[];return e.forEach(e=>{t.push({id:e.id,...e.data()})}),g(t),m}catch(e){return null}finally{b(!1)}},N=(0,o.useCallback)(e=>{e.forEach(e=>{let a=new FileReader;a.onabort=()=>console.log("file reading was aborted"),a.onerror=()=>console.log("file reading has failed"),a.onload=async()=>{let s=a.result;p(e.name),t(s,e.name)},a.readAsText(e)})},[e]),{getRootProps:k,getInputProps:C,isFocused:E}=(0,u.uI)({onDrop:N,accept:{"text/html":[".txt"]}});return(0,o.useEffect)(()=>{y()},[e]),(0,s.jsxs)("main",{className:"w-full h-screen grid grid-cols-2 gap-6 p-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c,{getRootProps:k,getInputProps:C,isFocused:E,isHovered:a,setIsHovered:n,fileName:i,setFileName:p}),(0,s.jsx)(h,{wordCounts:e})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"p-10 grid grid-cols-5 gap-6 bg-slate-200 rounded-2xl",children:(0,s.jsx)(f,{isLoading:j,data:m,selectedButton:w,buttonHandler:e=>{v(e)}})}),(0,s.jsx)("div",{className:"p-10",children:(0,s.jsx)(x,{data:m,selectedButton:w})})]})]})}}},function(e){e.O(0,[358,211,971,69,744],function(){return e(e.s=1153)}),_N_E=e.O()}]);
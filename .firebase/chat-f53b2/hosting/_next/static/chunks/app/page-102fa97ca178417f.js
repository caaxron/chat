(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1153:function(e,t,s){Promise.resolve().then(s.bind(s,2909))},2909:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),r=s(8121);let l=(0,s(6142).ZF)({apiKey:"AIzaSyB5stfrfaLePm38CqARYOrwIDgc5mpevko",authDomain:"chat-f53b2.firebaseapp.com",projectId:"chat-f53b2",storageBucket:"chat-f53b2.appspot.com",messagingSenderId:"995126412197",appId:"1:995126412197:web:a10f60197faf080a885e4c"}),n=(0,r.ad)(l);var o=s(2265);let i=e=>{let{getRootProps:t,getInputProps:s,isFocused:r,isHovered:l,setIsHovered:n,fileName:i}=e,c=(0,o.useMemo)(()=>({flex:1,display:"flex",width:"100%",height:"50%",justifyContent:"center",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:16,borderColor:r?"#1e40af":"#94a3b8",borderStyle:"dashed",backgroundColor:l?"#f0f0f0":"#ffffff",color:"#94a3b8",outline:"none",transition:"border .24s ease-in-out, background-color .24s ease-in-out"}),[r,l]);return(0,a.jsxs)("div",{...t({style:c}),onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[(0,a.jsx)("input",{className:"w-full ",...s()}),(0,a.jsx)("div",{children:i||(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("svg",{"aria-hidden":"true",className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,a.jsxs)("h1",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,a.jsx)("span",{className:"text-xs",children:"only for txt file"})]})})]})};async function c(e,t){try{await (0,r.ET)((0,r.hJ)(n,"chat"),{fileName:e,wordCount:t})}catch(e){console.log(e,"Fail to upload")}}let d=(0,s(2020).Ue)(e=>({wordCounts:[],calculateWord:(t,s)=>{let a=t.split("\n"),r={},l="";a.forEach(e=>{let t=e.trim().split(/\s+/);t.length>0&&(t[0].startsWith("<")&&t[0].endsWith(">")?r[l=t[0].slice(1,-1)]=(r[l]||0)+t.length-1:r[l]=(r[l]||0)+t.length)});let n=Object.entries(r).sort((e,t)=>t[1]-e[1]).map(e=>{let[t,s]=e;return"".concat(t,": ").concat(s+" words")});c(s,n),e({wordCounts:n})}}));var u=s(7453);let h=e=>(0,a.jsx)("div",{className:"flex flex-col justify-center items-center ",children:Object.entries(e).map(e=>{let[t,s]=e;return(0,a.jsx)("ul",{children:s.map((e,t)=>{let[s,r]=e.split(": ");return(0,a.jsx)("li",{children:"".concat(s,": ").concat(r)},t)})})})}),f=e=>{let{isLoading:t,data:s,selectedButton:r,buttonHandler:l}=e;return t?(0,a.jsx)("h1",{children:"Loading....."}):s&&s.map((e,t)=>(0,a.jsx)("button",{onClick:()=>l(e.id),className:"h-8 bg-cyan-100 rounded-xl border-2 ".concat(e.id===r?"border-cyan-500":""),children:e.fileName},t))},x=e=>{let{data:t,selectedButton:s}=e;return t&&t.map((e,t)=>(0,a.jsx)("div",{className:"flex flex-col",children:e.id===s&&(0,a.jsx)("ul",{children:e.wordCount.map((e,t)=>{let[s,r]=e.split(": ");return(0,a.jsx)("li",{children:"".concat(s,": ").concat(r)},t)})})},t))};function m(){let{wordCounts:e,calculateWord:t}=d(),[s,l]=(0,o.useState)(!1),[c,m]=(0,o.useState)(""),[p,g]=(0,o.useState)(),[j,b]=(0,o.useState)(),[w,v]=(0,o.useState)(),y=async()=>{try{b(!0);let e=await (0,r.PL)((0,r.hJ)(n,"chat")),t=[];return e.forEach(e=>{t.push({id:e.id,...e.data()})}),g(t),p}catch(e){return null}finally{b(!1)}},N=(0,o.useCallback)(e=>{e.forEach(e=>{let s=new FileReader;s.onabort=()=>console.log("file reading was aborted"),s.onerror=()=>console.log("file reading has failed"),s.onload=async()=>{let a=s.result;m(e.name),t(a,e.name)},s.readAsText(e)})},[e]),{getRootProps:k,getInputProps:C,isFocused:E}=(0,u.uI)({onDrop:N,accept:{"text/html":[".txt"]}});return(0,o.useEffect)(()=>{y()},[e]),(0,a.jsxs)("main",{className:"w-full h-screen grid grid-cols-2 gap-6 p-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i,{getRootProps:k,getInputProps:C,isFocused:E,isHovered:s,setIsHovered:l,fileName:c,setFileName:m}),(0,a.jsxs)("div",{className:"pt-8 text-xl text-blue-400 font-bold",children:[(0,a.jsx)("h1",{children:"Output:"}),(0,a.jsx)(h,{wordCounts:e})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl text-blue-400 font-bold",children:p?"History List":"Empty"}),(0,a.jsx)("div",{className:"p-10 grid grid-cols-5 gap-6 bg-slate-200 rounded-2xl",children:(0,a.jsx)(f,{isLoading:j,data:p,selectedButton:w,buttonHandler:e=>{v(e)}})}),(0,a.jsx)("div",{className:"p-10",children:(0,a.jsx)(x,{data:p,selectedButton:w})})]})]})}}},function(e){e.O(0,[358,211,971,69,744],function(){return e(e.s=1153)}),_N_E=e.O()}]);